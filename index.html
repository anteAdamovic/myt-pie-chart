<html>
  <head>
    <script src="scripts/d3.js"></script>
    <script src="scripts/mytPieChart.js"></script>
    <style>
    .arc text {
      font: 10px sans-serif;
      text-anchor: middle;
    }

    .arc path {
      stroke: #fff;
    }
    .pie_toolTip {
      float: right;
      border: 1px solid black;
      border-radius: 5px;
      background-color: gray;
      padding: 10px;
    }
    </style>
  </head>
  <body>
    <div id="testDiv3"></div>
    <div id="testDiv4"></div>
    <script>
      // mytPieChart(data, width, height, container, id)
      // MUST PASS EXISTING CONTAINER ATM

      var pie2 = mytPieChart.newChart();
      var data = [{
        name: "Example 1",
        value: 123,
        bgColor: 'blue',
        color: 'red'
      },{
        name: "Example 2",
        value: 246,
        bgColor: 'yellow',
        color: 'blue'
      },{
        name: "Example 3",
        value: 492,
        bgColor: 'green'
        //color: 'black'
      },{
        name: "Example 4",
        value: 984,
        //bgColor: someRandomColor
        color: 'red'
      }];
      // Bind data
      pie2.setData(data);
      // Set width
      pie2.setWidth(700);
      // Set height
      pie2.setHeight(350);
      // Set container id
      pie2.setContainerId('testDiv3');
      // Set svg id
      pie2.setId('pie2id');
      // Display the chart
      pie2.draw();

      var data1 = mytPieChart.generateTestData(10);
      var flag = false;
      function myTalengi () {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (xhttp.readyState == 4 && xhttp.status == 200) {
            createMytChart(JSON.parse(xhttp.responseText));
          }
        };
        xhttp.open("GET", "https://mytalengi.com/api/v1/reports/status", true);
        xhttp.send();
      }

      var mytPie = mytPieChart.newChart();

      function createMytChart (d){
        var data = [];
        data.push({
          name: 'Github',
          value: d.github,
          bgColor: '#8add6d',
          color: 'white'
        });
        data.push({
          name: 'Stackoverflow',
          value: d.stack,
          bgColor: '#9fa6ad',
          color: 'white'
        });
        data.push({
          name: 'Linked',
          value: d.linked,
          bgColor: '#3af',
          color: 'white'
        });

        mytPie.setData(data);
        mytPie.setWidth(600);
        mytPie.setHeight(300);
        mytPie.setContainerId('myt');
        mytPie.setId('mytPie');
        d3.select('#myt_title').text("MyTalengi Account Data");
        var date = new Date(d.refreshed);
        d3.select('#myt_info').text("Refreshed on: " + date.toLocaleString());
        mytPie.draw();
      }
    </script>
    <input type="button" value="Swap data" onclick="if(flag){ pie2.setData(data); pie2.draw(); } else { pie2.setData(data1); pie2.draw(); } flag = !flag; "/>
    <div id="myt">
      <h3 id="myt_title"></h3>
      <p id="myt_info"></p>
    </div>
    <input type="button" value="Display myTalengi data" onclick="myTalengi()"/>
  </body>
</html>
